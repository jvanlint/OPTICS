{% extends "layouts/base.html" %}{% load static %} {% block title %} Package {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<style>

.date {
    font-size: 11px
}

.comment-text {
    font-size: 12px;
	color: black;
}

.fs-12 {
    font-size: 12px;
	
}

.shadow-none {
    box-shadow: none;
}

.name {
    color: #007bff;
}

.cursor:hover {
    color: blue;
}

.cursor {
    cursor: pointer;
}

.textarea {
    resize: none;
</style>

{% endblock stylesheets %} {% block content %}
{% include 'includes/confirm_delete_modal.html' %}

<main class="c-main">
	<div class="container-fluid">
		<div class="fade-in">
			<div class="row">
				<div class="col-sm-12 col-md-5">
					<div class="card">
						<div class="card-header">
							<h6 class="text-muted">Package</h6>
							<h2>{{package_object.name}}</h2>
							<div class="media text-muted pt-3">
								<div class="c-avatar"><img class="c-avatar-img" src="{% static mission_object.creator.profile.profile_image %}" alt="" /></div>
								<p class="media-body pb-3 pl-2 mb-0  lh-125">
								<strong class="d-block text-gray-dark">
									{% if package_object.creator.username %}
									<a href="{% url 'user_profile' mission_object.creator.id %}" class="text-decoration-none text-reset">{{ mission_object.creator.username }}</a>
									{% endif %}
								</strong>
								{{ package_object.date_created }}
								</p>
							</div>
						</div>
						<div class="card-body">
							{{package_object.summary|linebreaks|urlize}}
							<div class="nav-tabs-boxed">
								<ul class="nav nav-tabs" role="tablist">
									
									<li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#comms" role="tab" aria-controls="comms">Comms</a></li>
									<li class="nav-item"><a class="nav-link" data-toggle="tab" href="#notes" role="tab" aria-controls="notes">Coordination Notes</a></li>
								</ul>
								<div class="tab-content">
									<div class="tab-pane active" id="comms" role="tabpanel">{{package_object.frequency}}</div>
									<div class="tab-pane" id="notes" role="tabpanel">{{package_object.package_coordination|linebreaks|urlize}}</div>
								</div>
							</div>
						</div>
						<div class="card-footer">
							{% if user.userprofile.isAdmin %} 
								<button class="btn-sm btn-primary dropdown-toggle float-right" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
							{% else %}
								<button class="btn-sm btn-primary dropdown-toggle float-right" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" disabled="">
							{% endif %}
								<svg class="c-icon">
									<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-pencil"></use>
								</svg>
								&nbspPackage
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<a class="dropdown-item" href="#">
									<svg class="c-icon">
										<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-pencil"></use>
									</svg>
									&nbspEdit
								</a>
								<a class="dropdown-item" id="generate_{{mission_object.id}}" data-toggle="modal" data-target="#confirmModal" data-message="Are you sure? If you proceed, the {{ mission_object.name }} mission will be deleted." data-buttontext="Delete" href="#">
									<svg class="c-icon">
										<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-trash"></use>
									</svg>
									&nbspDelete
								</a>
							</div>
						</div>
					</div>
					<!-- /.card -->

					<!--.card -->
					<div class="card">
						<div class="card-header">
							Comments <span class="badge badge-pill badge-info ml-auto">{{comments.count}}</span>
						</div>
						<div class="card-body">
								<form action="#" method="post">
									{% csrf_token %}
									<div class="d-flex flex-row align-items-start">
										<img class="rounded-circle" src="{% static user.profile.profile_image %}" width="40">
										<textarea class="form-control ml-1 shadow-none textarea" id="comment_text" name="comment_text"></textarea>
									</div>
                    				<div class="mt-2 text-right">
										<button class="btn btn-info btn-sm shadow-none" type="submit" value="Post">Post Comment</button>
									</div>
								</form>
						</div>	
						<div class="card-body">
							{% for comment in comments %}
								<!-- Start Comment-->
								<div class="media text-muted pt-3">
									<div class="c-avatar"><img class="c-avatar-img" src="{% static comment.user.profile.profile_image %}" alt="" /></div>
										<p class="media-body pb-3 pl-2 mb-0  lh-125 border-bottom border-gray">
											<strong class="d-block text-gray-dark"><a href="{% url 'user_profile' comment.user.id %}" class="text-decoration-none text-reset">{{ comment.user.username}}</a></strong>
											
											{{ comment.comment|urlize }}
											<p class="small">{{ comment.date_created | timesince}} ago.</p>
										</p>
								</div>
								<!-- End Comment -->
								{% endfor %}
						</div>
						
					</div>


					<!--.card -->

				</div>
				<!-- /.col-->
				<div class="col-sm-0 col-md-7">

					<!-- .card -->
					<div class="card">
						<div class="card-header">Flight{{ flight_object|pluralize }} <span class="badge badge-pill badge-info ml-auto">{{ flight_object.count }}</span></div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-striped">
									<thead>
										<tr>
											<th>Callsign</th>
											<th>Tasks</th>
											<th>Radio</th>
											<th>Tacan</th>
											<th>A/C Type</th>
											<th># A/C </th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody>
										{% if flight_object %} 
										{% for flight in flight_object %}
										<tr>
											<td><a href="#">{{ flight.callsign }}</a></td>
											<td>{{ flight.task }}</td>
											<td>{{ flight.radio_frequency }}</td>
											<td>{{ flight.tacan }}</td>
											<td>{{ flight.radio_frequency }}</td>
											<td>{{ flight.radio_frequency }}</td>
											<td>
												<button class="btn btn-info btn-sm dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													<svg class="c-icon">
														<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-pencil"></use>
													</svg>
													&nbspFlight
												</button>
												<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
													<a class="dropdown-item" href="#">
														<svg class="c-icon">
															<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-pencil"></use>
														</svg>
														&nbspEdit
													</a>
													<a class="dropdown-item" id="package_{{package.id}}" data-toggle="modal" data-target="#confirmModal" data-message="Are you sure? If you proceed, the {{ package.callsign }} package will be deleted." data-buttontext="Delete" href="#">
														<svg class="c-icon">
															<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-trash"></use>
														</svg>
														&nbspDelete
													</a>
												</div>
											</td>
										</tr>
										{% endfor %} {% else %}
										<tr>
											<td colspan="5">No flights available.</td>
										</tr>
										{% endif %}
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer">
						<h6>
							<a href="#" class="btn btn-sm btn-success float-right" role="button">
								<svg class="c-icon">
									<use xlink:href="/static/assets/vendors/@coreui/icons/svg/free.svg#cil-plus"></use>
								</svg>
								Add Flight
							</a>
						</h6>
						</div>
					</div>
					<!-- /.card -->

				</div>
				<!-- /.col-->
			</div>
			<!-- /.row-->
		</div>
	</div>
</main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<!-- Confirm Delete JS -->
<script src="{% get_static_prefix %}assets/js/confirm_delete.js"></script>
{% endblock javascripts %}
