{% extends "dashboard/basev2.html" %} 
{% load static %} 
{% block content %}

<!-- start container -->
<div class="container">

	<!-- start row - Bread Crumbs -->
	<div class="row">
		<!-- Start Col -->
		<div class = "col-sm">

            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                  <li class="breadcrumb-item"><a href="{% url 'campaign' %}">Campaigns</a></li>
                  <li class="breadcrumb-item"><a href="{% url 'campaign' packageObject.mission.campaign.id  %}">{{ packageObject.mission.campaign.name }}</a></li>
                  <li class="breadcrumb-item"><a href="{% url 'mission' packageObject.mission.id  %}">{{packageObject.mission.name}}</a></li>
                  <li class="breadcrumb-item active" aria-current="page">{{packageObject.name}}</li>
                </ol>
              </nav>
		</div>
	</div>
	<!-- end row -->

    <div class="starter-template">
        <h2>{{ packageObject.name }}</h2>
        
        <h6>MISSION {{packageObject.mission.name}} / {{packageObject.mission.mission_date}} / {{packageObject.mission.mission_time}}//</h6>
        <hr>
        <p class="lead">{{ packageObject.description|linebreaks }}</p>
        <h4>Common Package Frequency: <span class="badge badge-primary"> {{ packageObject.frequency}}</span></h4>

        <div class="btn-toolbar">
            <div class="btn-group mr-2">
                <a class="btn btn-sm btn-outline-secondary" href="{% url 'package_update' packageObject.id %}?returnUrl={{request.path}}" role="button">Edit</a>
                                    <a class="btn btn-sm btn-outline-secondary" href="{% url 'package_delete' packageObject.id %}?returnUrl={{request.path}}" role="button">Delete</a>
            </div>
        </div>
    </div>
    <hr>

    <h2>Flight(s) <a href="{% url 'flight_add' packageObject.id %}" role="button"><button type="button" class="btn btn-sm btn-primary float-right"><i class="bi bi-plus"></i> Add Flight</button></a></h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead class="thead-dark">
                <tr>
                    <th>Callsign</th>
                    <th>Radio</th>
                    <th>Tacan</th>
                    <th>A/C Type</th>
                    <th># A/C</th>
                    <th scope="col" colspan="2" style="text-align:center;">Action</th>
                </tr>
            </thead>
            <tbody>
                {% if flightObject %}
            
                {% for flight in flightObject %}
                <tr>
                <td>
                    <a href="/airops/flight/{{ flight.id }}/">{{ flight.callsign }} </a>
                    {% for aircraft in flight.aircraft_set.all %}
                    {% if aircraft.package_lead %}
                        <span class="badge badge-info"> PACKAGE LEAD</span>
                    {% endif %}
                {% endfor %}
                </td>
                <td>{{ flight.radio_frequency }}</td>
                <td>{{ flight.tacan }}</td>
                <td>{{flight.aircraft_set.first.type}}</td>
                <td>{{flight.aircraft_set.count}}</td>
                <td>
                    <a class="btn btn-sm btn-outline-primary" href="{% url 'flight_update' flight.id %}?returnUrl={{request.path}}" role="button">Edit</a>
                </td>
                <td>
                    <a class="btn btn-sm btn-outline-danger" href="{% url 'flight_delete' flight.id %}?returnUrl={{request.path}}" role="button">Delete</a>
                </td>
                </tr>
                {% endfor %}
            </tr>
            {% else %}
            <tr>
                <td colspan="5">No flights are available.</td>
            </tr>
            {% endif %}

            </tbody>
        </table>
    </div>


{% endblock %}